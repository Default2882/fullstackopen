(this.webpackJsonpthephonebook=this.webpackJsonpthephonebook||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var o=t(1),c=t(17),a=t.n(c),i=t(8),u=t(3),r=t(0),s=function(e){var n=e.newName,t=e.handlename,o=e.newNumber,c=e.handlenumber,a=e.handlesubmit;return Object(r.jsxs)("form",{children:[Object(r.jsxs)("div",{children:[Object(r.jsxs)("p",{children:["name: ",Object(r.jsx)("input",{value:n,onChange:t})]}),Object(r.jsxs)("p",{children:["number: ",Object(r.jsx)("input",{value:o,onChange:c})]})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",onClick:a,children:"add"})})]})},l=function(e){var n=e.filterbook;return Object(r.jsxs)(r.Fragment,{children:["Filter Phonebook: ",Object(r.jsx)("input",{onChange:n})]})},d=function(e){var n=e.todisplay,t=e.deleteContact;return Object(r.jsx)("ul",{children:n.map((function(e){return Object(r.jsxs)("li",{id:e.id,children:[e.name," : ",e.number,Object(r.jsx)("button",{id:e.id,type:"button",onClick:t,children:"Delete"})]},e.name)}))})},b=t(5),h=t.n(b),j="/api/persons",f=function(){return console.log("fetching"),h.a.get(j).then((function(e){return e.data}))},m=function(e){return h.a.post(j,e).then((function(e){return e.data}))},O=function(e,n,t,o,c,a){var i=j+"/"+e;return console.log("Deleting : ",i),h.a.delete(i).then((function(e){console.log("Succesfully Deleted")}))},p=function(e,n){var t=j+"/"+e;return h.a.put(t,n).then((function(e){return console.log("Successfully updated"),e.data}))},g=function(e){var n=e.message,t=e.isok;return null==n||""===n?null:t?Object(r.jsx)("div",{className:"notif",children:n}):Object(r.jsx)("div",{className:"error",children:n})},v=(t(41),function(){var e=Object(o.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1];Object(o.useEffect)((function(){f().then((function(e){c(e),S(e)})).catch((function(e){console.log("HTTP GET failed!"),console.log(e),E(e.response.data),B(!1),setTimeout((function(){E(null)}),2e3)}))}),[]);var a=Object(o.useState)(""),b=Object(u.a)(a,2),h=b[0],j=b[1],v=Object(o.useState)(""),x=Object(u.a)(v,2),w=x[0],k=x[1],T=Object(o.useState)(Object(i.a)(t)),y=Object(u.a)(T,2),C=y[0],S=y[1],D=Object(o.useState)(null),N=Object(u.a)(D,2),F=N[0],E=N[1],P=Object(o.useState)(!0),J=Object(u.a)(P,2),L=J[0],B=J[1];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(g,{message:F,isok:L}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Filter"}),Object(r.jsx)(l,{filterbook:function(e){var n=e.target.value.toLowerCase();if(""===n)S(Object(i.a)(t));else{var o=t.filter((function(e){return e.name.toLowerCase().startsWith(n)}));S(o)}}}),Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(s,{newName:h,handlesubmit:function(e){e.preventDefault();var n=t.find((function(e){return e.name===h}));if(n)if(w!==n.number){if(window.confirm('\n                    The name "'.concat(n.name,'" is already in the phone book. \n                    Do you want to update it??\n                    '))){var o={name:h,number:w,id:n.id};p(n.id,o).then((function(e){c(t.map((function(e){return e.name===h?(e.number=w,e):e}))),S(t.map((function(e){return e.name===h?(e.number=w,e):e}))),j(""),k(""),E("".concat(e.name," has been updated")),B(!0),setTimeout((function(){E(null)}),2e3)})).catch((function(e){E(e.response.data.error),B(!1),setTimeout((function(){E(null)}),2e3)}))}}else E('The contact with the same name "'.concat(h,'" and number "').concat(w,'" exists.')),B(!1),setTimeout((function(){E(null)}),2e3);else{var a={name:h,number:w};m(a).then((function(e){console.log(e),a.id=e.id,c(t.concat(a)),S(t.concat(a)),j(""),k(""),E("".concat(e.name," has been added to the phone book!")),B(!0),setTimeout((function(){E(null)}),2e3)})).catch((function(e){E(e.response.data.error),B(!1),setTimeout((function(){E(null)}),2e3)}))}},newNumber:w,handlenumber:function(e){k(e.target.value)},handlename:function(e){j(e.target.value)}}),Object(r.jsx)("h2",{children:"Numbers"}),Object(r.jsx)(d,{todisplay:C,deleteContact:function(e){var n,o=e.target.id,a=t.find((function(e){return e.id.toString()===o}));a&&(n=a.name,window.confirm("Do you want to delete ".concat(n))&&n&&O(o,L,E,F,B,n).then(f).then((function(e){console.log("Reloading"),console.log(e),c(e),S(e)})).catch((function(e){console.log("Delete failed"),E("".concat(n," has already been removed from the database")),B(!1),setTimeout((function(){E(null)}),1e4)})))}})]})]})});a.a.render(Object(r.jsx)(v,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.2e6ec9ee.chunk.js.map