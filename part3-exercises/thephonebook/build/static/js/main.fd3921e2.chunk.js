(this.webpackJsonpthephonebook=this.webpackJsonpthephonebook||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var o=t(1),c=t(17),a=t.n(c),i=t(8),u=t(3),r=t(0),l=function(e){var n=e.newName,t=e.handlename,o=e.newNumber,c=e.handlenumber,a=e.handlesubmit;return Object(r.jsxs)("form",{children:[Object(r.jsxs)("div",{children:[Object(r.jsxs)("p",{children:["name: ",Object(r.jsx)("input",{value:n,onChange:t})]}),Object(r.jsxs)("p",{children:["number: ",Object(r.jsx)("input",{value:o,onChange:c})]})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",onClick:a,children:"add"})})]})},s=function(e){var n=e.filterbook;return Object(r.jsxs)(r.Fragment,{children:["Filter Phonebook: ",Object(r.jsx)("input",{onChange:n})]})},d=function(e){var n=e.todisplay,t=e.deleteContact;return Object(r.jsx)("ul",{children:n.map((function(e){return Object(r.jsxs)("li",{id:e.id,children:[e.name," : ",e.number,Object(r.jsx)("button",{id:e.id,type:"button",onClick:t,children:"Delete"})]},e.name)}))})},b=t(5),h=t.n(b),j="https://infinite-river-65083.herokuapp.com/api/persons",f=function(){return console.log("fetching"),h.a.get(j).then((function(e){return e.data})).catch((function(e){console.log("HTTP GET failed!"),console.log(e)}))},m=function(e){return h.a.post(j,e).then((function(e){return e.data})).catch((function(e){console.log("HTTP POST failed!"),console.log(e)}))},O=function(e,n,t,o,c,a){var i=j+"/"+e;return console.log("Deleting : ",i),h.a.delete(i).then((function(e){console.log("Succesfully Deleted")})).catch((function(e){console.log("Delete failed"),t("".concat(a," has already been removed from the database")),c(!1),setTimeout((function(){t(null)}),1e4)}))},p=function(e,n){var t=j+"/"+e;return h.a.put(t,n).then((function(e){return console.log("Successfully updated"),e.data})).catch((function(e){console.log("HTTP PUT failed!"),console.log(e)}))},g=function(e){var n=e.message,t=e.isok;return null==n||""===n?null:t?Object(r.jsx)("div",{className:"notif",children:n}):Object(r.jsx)("div",{className:"error",children:n})},v=(t(41),function(){var e=Object(o.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1];Object(o.useEffect)((function(){f().then((function(e){c(e),C(e)}))}),[]);var a=Object(o.useState)(""),b=Object(u.a)(a,2),h=b[0],j=b[1],v=Object(o.useState)(""),x=Object(u.a)(v,2),k=x[0],w=x[1],T=Object(o.useState)(Object(i.a)(t)),y=Object(u.a)(T,2),S=y[0],C=y[1],D=Object(o.useState)(null),N=Object(u.a)(D,2),P=N[0],F=N[1],E=Object(o.useState)(!0),H=Object(u.a)(E,2),J=H[0],L=H[1];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(g,{message:P,isok:J}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Filter"}),Object(r.jsx)(s,{filterbook:function(e){var n=e.target.value.toLowerCase();if(""===n)C(Object(i.a)(t));else{var o=t.filter((function(e){return e.name.toLowerCase().startsWith(n)}));C(o)}}}),Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(l,{newName:h,handlesubmit:function(e){e.preventDefault();var n=t.find((function(e){return e.name===h}));if(n)if(k!==n.number){if(window.confirm('\n                    The name "'.concat(n.name,'" is already in the phone book. \n                    Do you want to update it??\n                    '))){var o={name:h,number:k,id:n.id};p(n.id,o).then((function(e){c(t.map((function(e){return e.name===h?(e.number=k,e):e}))),C(t.map((function(e){return e.name===h?(e.number=k,e):e}))),j(""),w(""),F("".concat(e.name," has been updated")),L(!0),setTimeout((function(){F(null)}),2e3)}))}}else F('The contact with the same name "'.concat(h,'" and number "').concat(k,'" exists.')),L(!1),setTimeout((function(){F(null)}),2e3);else{var a={name:h,number:k};m(a).then((function(e){a.id=e.id,c(t.concat(a)),C(t.concat(a)),j(""),w(""),F("".concat(e.name," has been added to the phone book!")),L(!0),setTimeout((function(){F(null)}),2e3)}))}},newNumber:k,handlenumber:function(e){w(e.target.value)},handlename:function(e){j(e.target.value)}}),Object(r.jsx)("h2",{children:"Numbers"}),Object(r.jsx)(d,{todisplay:S,deleteContact:function(e){var n,o=e.target.id,a=t.find((function(e){return e.id.toString()===o}));a&&(n=a.name,window.confirm("Do you want to delete ".concat(n))&&n&&O(o,J,F,P,L,n).then(f).then((function(e){console.log("Reloading"),console.log(e),c(e),C(e)})))}})]})]})});a.a.render(Object(r.jsx)(v,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.fd3921e2.chunk.js.map